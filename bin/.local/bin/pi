#!/bin/bash

if [ "$1" = "-h" ] || [ "$1" = "--help" ]; then
    set DESC="Test the internet and VPN connection"
    echo "Usage: $(basename $0) [OPTIONS]"
    echo "Quick internet and VPN healthcheck."
    echo "Options:"
    echo "  -h, --help    Show this help and exit"
    exit 0
fi

echo -e "\033[1mVPN\033[0m"

vpn_location=$(mullvad status | awk 'FNR == 4 { print $3 " " $4 }')

if [ -z "$vpn_location" ]; then
    echo -e "\033[31mNot connected to a VPN.\033[0m"
else
    echo -e "Connected to: \033[32m$vpn_location\033[0m"
fi

ping_status=$(ping -c 1 -q 1.1.1.1 | awk 'FNR == 4')
echo -e "\033[1mPing\033[0m"
echo "$ping_status"

